@{
    var eventId = ViewBag.EventId;
    var sessionId = ViewBag.SessionId;
    var sessionNumber = ViewBag.SessionNumber;
    string eventName = ViewBag.EventName != null ? ViewBag.EventName : "";
    string sessionName = ViewBag.SessionName != null ? ViewBag.SessionName : "";
    IEnumerable<EventCollectionViewModel> listCollection = ViewBag.Collections;
    //Trường hợp có nhiều session, click vô 1 session nhỏ sẽ chỉ hiện submenu của session đó
    bool isSubmenu = ViewBag.IsSubMenu != null ? ViewBag.IsSubMenu : false;
}
@using CapstoneProjectClient.ViewModel;
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join.vn - @ViewBag.Title</title>
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/css/bootstrap.min.css">
    <!-- Google fonts - Roboto -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/css/style.default.css" id="theme-stylesheet">
    <!-- jQuery Circle-->
    <link rel="stylesheet" href="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/css/grasp_mobile_progress_circle-1.0.0.min.css">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="~/Content/img/LogoMakr_6CVPn5.png">
    <!-- Font Awesome CDN-->
    <!-- you can replace it by local Font Awesome-->
    <script src="~/Content/bootstrap/Dashboard/use.fontawesome.com/99347ac47f.js"></script>
    <!-- Font Icons CSS-->
    <link rel="stylesheet" href="~/Content/bootstrap/Dashboard/file.myfontastic.com/da58YPMQ7U5HY8Rb6UxkNf/icons.css">
    <!--Progress Bar-->
    <link rel="stylesheet" href="~/Content/ProgressBar/css/bootstrap-progressbar-3.3.4.css">
    <!--Custom Css-->
    <link rel="stylesheet" href="~/Content/CustomCss/main.css">
    <link rel="stylesheet" href="~/Content/CustomCss/QA.css">
    <link rel="stylesheet" href="~/Content/CustomCss/sponsor.css">
    <link rel="stylesheet" href="~/Content/CustomCss/speaker.css">
    <link rel="stylesheet" href="~/Content/CustomCss/home.css">
    <link rel="stylesheet" href="~/Content/CustomCss/timeline.css">
    <link rel="stylesheet" href="~/Content/CustomCss/voting.css">
    <link rel="stylesheet" href="~/Content/CustomCss/schedule.css">
    <link rel="stylesheet" href="~/Content/CustomCss/file.css">








    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

</head>
<body>

    <nav class="side-navbar side-navbar-custom">
        <div class="side-navbar-wrapper">
            <div class="sidenav-header sidenav-header-custom d-flex align-items-center justify-content-center">
                <div class="sidenav-header-inner text-center">
                    <img src="~/Content/img/LogoMakr_6CVPn5.png" alt="person" class="img-fluid rounded-circle">
                    @*<h2 class="h5 text-uppercase">Anderson Hardy</h2><span class="text-uppercase">Web Developer</span>*@
                </div>
                <div class="sidenav-header-logo">
                    <a class="brand-small text-center" style="font-family: Montserrat-Regular">
                        <img src="~/Content/img/LogoMakr_6CVPn5.png" />
                    </a>
                </div>
            </div>
            <div class="main-menu">
                <ul id="side-main-menu" class="side-menu list-unstyled">
                    @{

                        if (isSubmenu)
                        {
                            <li> <a class="custom-menu menu-timeline" href="@Url.Action("Index", "Timeline", new { eventId = eventId, sessionId = sessionId })"><i class="icon-form"></i><span>Dòng thời gian</span></a></li>
                            <li> <a class="custom-menu menu-qa" href="@Url.Action("Index", "QA", new { eventId = eventId, sessionId = sessionId })"><i class="fa fa-question-circle"></i><span>Hỏi đáp</span></a></li>
                            <li> <a class="custom-menu menu-livestream" href="@Url.Action("Index", "Livestream", new { eventId = eventId, sessionId = sessionId })"> <i class="fa fa-video-camera"></i><span>Trực tiếp</span></a></li>
                            <li> <a class="custom-menu" href="/Session/Index/@(eventId)"> <i class="fa fa-sign-out"></i><span>Quay lại</span></a></li>
                        }
                        else
                        {
                            if (sessionNumber == 0)
                            {
                                //Trường hợp không có session nào
                                if (listCollection != null)
                                {
                                    foreach (var collection in listCollection)
                                    {
                                        if (collection.IsActive)
                                        {
                                            if (collection.TypeId == (int)MyEnum.CollectionType.Speaker)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-users"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else if (collection.TypeId == (int)MyEnum.CollectionType.Sponsor)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-users"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else if (collection.TypeId == (int)MyEnum.CollectionType.File)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-file-o"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-cogs"></i><span>@(collection.Name)</span></a></li>
                                            }
                                        }
                                    }
                                }

                                <li> <a class="custom-menu menu-event" href="@Url.Action("Index", "Home", new { eventId = eventId })"> <i class="icon-home"></i><span>Thông tin sự kiện</span></a></li>
                                <li> <a class="custom-menu" href="/"> <i class="fa fa-sign-out"></i><span>Thoát</span></a></li>
                            }
                            else if (sessionNumber == 1)
                            {
                                //trường hợp event chỉ có 1 session thì show hết menu
                                <li> <a class="custom-menu menu-qa" href="@Url.Action("Index", "QA", new { eventId = eventId, sessionId = sessionId })"><i class="fa fa-question-circle"></i><span>Hỏi đáp</span></a></li>
                                <li> <a class="custom-menu menu-voting" href="@Url.Action("Index", "Voting", new { eventId = eventId, sessionId = sessionId })"> <i class="fa fa-check-circle-o"> </i><span>Bình chọn</span></a></li>
                                <li> <a class="custom-menu menu-timeline" href="@Url.Action("Index", "Timeline", new { eventId = eventId, sessionId = sessionId })"><i class="icon-form"></i><span>Dòng thời gian</span></a></li>
                                <li> <a class="custom-menu menu-livestream" href="@Url.Action("Index", "Livestream", new { eventId = eventId, sessionId = sessionId })"> <i class="fa fa-video-camera"></i><span>Trực tiếp</span></a></li>
                                if (listCollection != null)
                                {
                                    foreach (var collection in listCollection)
                                    {
                                        if (collection.IsActive)
                                        {
                                            if (collection.TypeId == (int)MyEnum.CollectionType.Speaker)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-users"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else if (collection.TypeId == (int)MyEnum.CollectionType.Sponsor)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-users"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else if (collection.TypeId == (int)MyEnum.CollectionType.File)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-file-o"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-cogs"></i><span>@(collection.Name)</span></a></li>
                                            }
                                        }
                                    }
                                }

                                <li> <a class="custom-menu menu-event" href="@Url.Action("Index", "Home", new { eventId = eventId })"> <i class="icon-home"></i><span>Thông tin sự kiện</span></a></li>
                                <li> <a class="custom-menu" href="/"> <i class="fa fa-sign-out"></i><span>Thoát</span></a></li>
                            }
                            else
                            {
                                //Trường hợp event có nhiều session thì show menu lựa session và menu event
                                <li> <a class="custom-menu menu-event" href="@Url.Action("Index", "Home", new { eventId = eventId })"> <i class="icon-home"></i><span>Thông tin sự kiện</span></a></li>
                                <li> <a class="custom-menu menu-session" href="@Url.Action("Index", "Session", new { eventId = eventId })"> <i class="fa fa-bars"></i><span>Các phiên tham luận</span></a></li>
                                if (listCollection != null)
                                {
                                    var ltskCollections = listCollection.Where(c => c.TypeId == (int)MyEnum.CollectionType.LTSK);
                                    if (ltskCollections != null)
                                    {
                                        foreach (var collection in ltskCollections)
                                        {
                                            if (collection.IsActive)
                                            {
                                                <li><a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-file-o"></i><span>@(collection.Name)</span></a></li>
                                            }
                                        }
                                    }

                                    foreach (var collection in listCollection)
                                    {
                                        if (collection.IsActive)
                                        {

                                            if (collection.TypeId == (int)MyEnum.CollectionType.File)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-file-o"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else if (collection.TypeId == (int)MyEnum.CollectionType.Speaker)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-users"></i><span>@(collection.Name)</span></a></li>
                                            }
                                            else if (collection.TypeId == (int)MyEnum.CollectionType.Sponsor)
                                            {
                                                <li> <a class="custom-menu menu-collection-@(collection.TypeId)" href="@Url.Action("Index", "Collection", new { eventId = eventId, typeId = collection.TypeId, sessionId = sessionId })"> <i class="fa fa-users"></i><span>@(collection.Name)</span></a></li>
                                            }
                                        }
                                    }
                                    <li> <a class="custom-menu menu-voting" href="@Url.Action("ListVoting", "Voting", new { eventId = eventId, sessionId = -1 })"> <i class="fa fa-check-circle-o"> </i><span>@*Bình chọn*@ Khảo sát</span></a></li>
                                    <li> <a class="custom-menu" href="/"><i class="fa fa-sign-out"></i><span>Thoát</span></a></li>

                                }
                            }
                        }




                    }
                </ul>
            </div>
        </div>
    </nav>

    <div class="page home-page">
        <!-- navbar-->
        <header class="header">
            <nav class="navbar narbar-custom" style="height: 64px;">
                <div class="container-fluid">
                    <div class="navbar-holder d-flex align-items-center justify-content-between">
                        <span class="event-title">
                            @{
                                if (ViewBag.EventName != null)
                                {
                                    @(ViewBag.EventName)
                                }
                                else
                                {
                                    @(ViewBag.SessionName)
                                }
                            }

                        </span>
                        <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">

                            @*@{
                                    if (sessionId != null)
                                    {
                                        <button style="position: fixed;right: 18px;top: 18px;background-color: gray;border: 0;"><a href="/Session/Index/@eventId">Quay về trang lựa chọn</a></button>
                                    }
                                }*@
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <!-- End navbar-->

        @RenderBody()
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")


    <!-- Javascript files-->

    <script src="~/Content/bootstrap/Dashboard/ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/tether.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/bootstrap.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/jquery.cookie.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/grasp_mobile_progress_circle-1.0.0.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/jquery.nicescroll.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/jquery.validate.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/charts-home.js"></script>
    <script src="~/Content/bootstrap/Dashboard/www.google-analytics.com/analytics.js"></script>
    <script src="~/Content/bootstrap/Dashboard/demo.bootstrapious.com/dashboard/js/front.js"></script>
    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID.-->
    <!--Signal R-->
    <script src="~/Scripts/jquery.signalR-2.2.3.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <!--Progress Bar-->
    <script src="~/Content/ProgressBar/bootstrap-progressbar.min.js"></script>
    <!--Custom JS-->
    <script src="~/Content/CustomJs/main.js"></script>

    @RenderSection("scripts", required: false)

</body>
</html>
